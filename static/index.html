async function saveRecording() {
  if (!blobForSave) { $("status").textContent='❌ No recording.'; advance(); return; }
  $("status").textContent='⏳ Saving…';

  try {
    const key = `sub${pid}_${String(i+1).padStart(3,'0')}_${slug(SENTS[i])}_${phase===0?'EN':'YUE'}.webm`;

    // 1) Ask backend for presigned POST
    const r = await fetch(`${API_BASE}/sign_post`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ pid, key })
    });
    if (!r.ok) throw new Error("sign_post failed");
    const { url, fields } = await r.json();

    // 2) Build FormData WITHOUT setting headers; browser sets multipart boundary.
    const fd = new FormData();
    Object.entries(fields).forEach(([k, v]) => fd.append(k, v));
    fd.append("file", new File([blobForSave], "rec.webm")); // no manual Content-Type

    // 3) POST directly to Spaces
    const put = await fetch(url, { method: "POST", body: fd }); // no headers
    if (!(put.status === 201 || put.status === 204 || put.ok)) {
      throw new Error(`upload POST failed: ${put.status}`);
    }

    $("status").textContent = "✅ Saved.";
  } catch (e) {
    console.error(e);
    $("status").textContent = "⚠️ Save failed. Moving on.";
  }
  advance();
}
